-- Add migration script here
CREATE TABLE M_USER (
    USER_ID         VARCHAR(36) PRIMARY KEY
    , USER_NAME     VARCHAR(165)
    , EMAIL         VARCHAR(255)
    , PASSWORD      VARCHAR(255)
    , SALT          VARCHAR(255)
    , ROLE          VARCHAR(1)
    , STATUS        VARCHAR(1) DEFAULT '1'
    , CREATED_AT    TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    , UPDATED_AT    TIMESTAMP DEFAULT NULL
    , LAST_LOGIN_AT TIMESTAMP DEFAULT NULL
    , DELETE_FLAG   BOOLEAN DEFAULT FALSE
)
;

CREATE TABLE M_PROJECT (
    PROJECT_ID     SERIAL PRIMARY KEY
    , PROJECT_NAME VARCHAR(255)
    , DESCRIPTION  TEXT
    , CREATED_AT   TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    , UPDATED_AT   TIMESTAMP DEFAULT NULL
    , MANAGER_ID   VARCHAR(36)
)
;

CREATE TABLE M_USER_PROJECT (
    USER_ID      VARCHAR(36)
    , PROJECT_ID INT
    , ROLE       VARCHAR(1)
    , CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    , UPDATED_AT TIMESTAMP DEFAULT NULL
    , PRIMARY KEY (USER_ID, PROJECT_ID)
)
;

CREATE TABLE T_TICKET (
    TICKET_ID      SERIAL PRIMARY KEY
    , TICKET_TITLE VARCHAR(255)
    , DESCRIPTION  TEXT
    , PRIORITY     INT
    , STATUS       INT
    , PROGRESS     INT
    , CREATED_AT   TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    , UPDATED_AT   TIMESTAMP DEFAULT NULL
    , DUE_DATE     DATE
    , PROJECT_ID   INT
    , ASSIGNEE_ID  VARCHAR(36)
)
;